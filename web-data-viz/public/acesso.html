<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href='https://cdn.boxicons.com/fonts/basic/boxicons.min.css' rel='stylesheet'>
  <link rel="stylesheet" href="css/acesso.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="./js/sessao.js"></script>

  <link rel="icon" href="assets/icon/chip.png">

  <title>Segurança de Acesso - CyberBeef</title>
</head>

<body onload="validarSessao()">
  <header class="navbar">
    <button id="but_atualizar_bl" class="clicavel bxr bxs-menu-select clicado"
      onclick="atualizarBarraLateral()"></button>

    <span id="sel_componentes" name="op_setor" class="sel_dash">
      <p id="title">Controle e Acesso</p>
      <button id="dash_todas_maquinas" style="display: none;" data-comp="geral"
        data-kpi1="Total de tentativas logins (últimos 7 dias)" data-kpi2="Taxa de Sucesso nos Logins (%)"
        data-kpi3="Contas Administrativas Ativas" data-kpi4="Contas Inativas (30 dias)">GERAL</button>
    </span>

    <nav id="buts_superiores">
      <button id="btnLiveMode" class="top-btn">
        <i class='bx bx-broadcast'></i> Modo Tempo Real
      </button>

      <span id="liveIndicator" class="live-indicator" style="display: none;">
        ● AO VIVO
      </span>

      <button id="btnRiskAI" class="top-btn">
        <i class='bx bx-brain'></i> Análise inteligente
      </button>

      <div id="modalAI" class="modal-ai">
        <div class="modal-content-ai glass">
          <span id="closeAI" class="close-ai">&times;</span>
          <h2 class="titulo-modal">Análise Inteligente de Riscos</h2>
          <pre id="aiOutput" class="ai-output">Clique em "Análise Inteligente" para iniciar.</pre>
        </div>
      </div>

    </nav>
  </header>

  <div class="barra_lateral sombreado ativa">
    <div id="logo"></div>
    <hr>

    <div id="usuario">
      <i class='bxr bxs-user' style='color:#fffafa'></i>
      <a id="b_usuario" class="texto_perfil">Administrador</a>
    </div>

    <hr>

    <div id="home" class="ops_home">
      <ul></ul>
      <li><a href="#">Controle e Acesso</a></li>
      <li><a href="empresa.html">Empresas</a></li>
      <li><a href="disponibilidade.html">Disponibilidade</a></li>
      <li><a href="jira-empresa.html">Chamados Jira</a></li>

      <span onclick="limparSessao()"
        style="display: inline-flex; align-items: center; color: #fffafa; font-size: large; gap: 1%;"
        class="clicavel clicado" title="Clique para encerrar sua sessão">
        <i class='bxr bx-arrow-out-left-square-half' style="color: #fffafa;"></i>
        <p>SAIR<a href="index.html"></a></p>
      </span>
    </div>
  </div>

  <div id="elementos" class="bl_ativa">
    <div class="cards">

      <!-- <div id="barra_pesquisa">
        <input type="text" placeholder="Pesquisar por usuários ou dispositivos..." id="pesquisa" class="interativo">
        <div id="nomes_dash" class="accordion"></div>
      </div> -->

      <span class="abas_kpis">
        <button data-aba="1" class="kpi interativo ativa">

          <span class="info-icon">
            <i class='bx bx-info-circle'></i>
            <span class="tooltip">
              Total de tentativas de login registradas nos últimos 7 dias
            </span>
          </span>

          <b id="kpi1" class="dado_card"></b>

          <p id="kpi1_desc">Total de Tentativas login (últimos 07 dias)</p>

        </button>

        <button data-aba="2" class="kpi interativo">
          <span class="info-icon">
            <i class='bx bx-info-circle'></i>
            <span class="tooltip">
              Percentual de logins bem-sucedidos em relação ao total de tentativas nos últimos 7 dias.
            </span>
          </span>

          <b id="kpi2" class="dado_card"></b>
          <p id="kpi2_desc">Taxa de Sucesso nos Logins (%)</p>
        </button>

        <button data-aba="3" class="kpi interativo">
          <span class="info-icon">
            <i class='bx bx-info-circle'></i>
            <span class="tooltip">
              Quantidade de contas administrativas atualmente ativas no sistema.
            </span>
          </span>

          <b id="kpi3" class="dado_card"></b>
          <p id="kpi3_desc">Contas Administrativas Ativas</p>
        </button>

        <button data-aba="4" class="kpi interativo">
          <span class="info-icon">
            <i class='bx bx-info-circle'></i>
            <span class="tooltip">
              Número de contas que não realizaram nenhuma tentativa de login nos últimos 7 dias.
            </span>
          </span>

          <b id="kpi4" class="dado_card"></b>
          <p id="kpi4_desc">Contas Inativas (07 dias)</p>
        </button>
      </span>

      <div id="aba_conteudo" class="interativo">
        <p id="titulo-conteudo">Tentativas de login por dia (últimos 07 dias)</p>

        <div class="grafico sombreado interativo" style="width: 100%; height: 350px;">
          <canvas id="graficoAba"></canvas>
        </div>
      </div>

    </div>

    <div id="graficos">

      <!-- GRÁFICO PRINCIPAL -->
      <span class="grafico sombreado interativo">
        <!-- <p id="titulo-grafico1">Sucesso vs Falha (últimos 07 dias)</p> -->
        <canvas id="grafico1"></canvas>
      </span>

      <!-- HEATMAP GITHUB-LIKE -->
      <div class="grafico sombreado grafico--heatmap">
        <div style="width:100%;">
          <h3 id="heatmapTitle" class="heatmap-title">Frequência de acessos diária — Mês</h3>
          <div style="width:100%; display:flex; justify-content:center;">
            <canvas id="heatmapCanvas" style="max-width:100%; height:240px;"></canvas>
          </div>

          <div class="heatmap-controls">
            <button id="prevMonth" class="btn-heat">←</button>
            <span id="currentMonthLabel" class="heatmap-month-label"></span>
            <button id="nextMonth" class="btn-heat">→</button>
          </div>
        </div>
      </div>

    </div>

  </div>

</body>

<script src="js/acesso.js"></script>

</html>